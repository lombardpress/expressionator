(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{197:function(e,t,n){e.exports=n(422)},418:function(e,t,n){},420:function(e,t,n){},422:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"requestPersons",function(){return U}),n.d(i,"receivePersons",function(){return k}),n.d(i,"receivePersonsFailure",function(){return x}),n.d(i,"fetchPersons",function(){return V}),n.d(i,"requestWitnesses",function(){return q}),n.d(i,"receiveWitnesses",function(){return H}),n.d(i,"receiveWitnessesFailure",function(){return G}),n.d(i,"fetchWitnesses",function(){return Q}),n.d(i,"requestManifest",function(){return B}),n.d(i,"receiveManifest",function(){return J}),n.d(i,"receiveManifestFailure",function(){return Y}),n.d(i,"fetchManifest",function(){return z}),n.d(i,"requestEdfList",function(){return K}),n.d(i,"receiveEdfList",function(){return X}),n.d(i,"receiveEdfListFailure",function(){return Z}),n.d(i,"fetchEdfList",function(){return $}),n.d(i,"requestEdfItems",function(){return ee}),n.d(i,"receiveEdfItems",function(){return te}),n.d(i,"receiveEdfItemsFailure",function(){return ne}),n.d(i,"fetchEdfItems",function(){return ie}),n.d(i,"requestEdfManifestations",function(){return se}),n.d(i,"receiveEdfManifestations",function(){return re}),n.d(i,"receiveEdfManifestationsFailure",function(){return oe}),n.d(i,"fetchEdfManifestations",function(){return ae}),n.d(i,"assignManifestations",function(){return ce}),n.d(i,"clearAssignedEdfManifestations",function(){return de}),n.d(i,"changeDataCreationView",function(){return ue}),n.d(i,"createAndAttachWitness",function(){return fe}),n.d(i,"createWitness",function(){return le}),n.d(i,"attachWitness",function(){return pe}),n.d(i,"unAttachWitness",function(){return Ee}),n.d(i,"updateWitness",function(){return he}),n.d(i,"changeFocusedWitness",function(){return Ie}),n.d(i,"createAndAssignEdf",function(){return me}),n.d(i,"assignEdf",function(){return ve}),n.d(i,"createEdf",function(){return Se}),n.d(i,"updateEdf",function(){return Te}),n.d(i,"clearEdfInfo",function(){return Oe}),n.d(i,"createAndAssignPerson",function(){return be}),n.d(i,"assignPerson",function(){return Ce}),n.d(i,"createPerson",function(){return ge}),n.d(i,"updatePerson",function(){return Ae}),n.d(i,"clearPersonInfo",function(){return _e}),n.d(i,"updateItem",function(){return je}),n.d(i,"createItem",function(){return we}),n.d(i,"changeFocusedItem",function(){return Ne}),n.d(i,"associateSurface",function(){return Re}),n.d(i,"selectCanvas",function(){return Fe});var s,r=n(0),o=n.n(r),a=n(18),c=n.n(a),d=n(10),u=n(11),f=n(12),l=n(14),p=n(13),E=n(15),h=n(8),I=n(121),m=n.n(I),v=n(190),S=n(191),T=n(34),O=n(192),b=n(17),C=(s={ASSIGN_EDF:"ASSIGN_EDF",ATTACH_WITNESS:"ATTACH_WITNESS",REQUEST_PERSONS:"REQUEST_PERSONS",RECEIVE_PERSONS:"RECEIVE_PERSONS",RECEIVE_PERSONS_FAILURE:"RECEIVE_PERSONS_FAILURE",ASSIGN_PERSON:"ASSIGN_PERSON",CLEAR_PERSON_INFO:"CLEAR_PERSON_INFO",CREATE_PERSON:"CREATE_PERSON",UPDATE_PERSON:"UPDATE_PERSON",REQUEST_WITNESSES:"REQUEST_WITNESSES",RECEIVE_WITNESSES:"RECEIVE_WITNESSES",RECEIVE_WITNESSES_FAILURE:"RECEIVE_WITNESSES_FAILURE",CHANGE_DATA_CREATION_VIEW:"CHANGE_DATA_CREATION_VIEW",CHANGE_FOCUSED_WITNESS:"CHANGE_FOCUSED_WITNESS",UPDATE_WITNESS:"UPDATE_WITNESS",CREATE_WITNESS:"CREATE_WITNESS"},Object(b.a)(s,"ATTACH_WITNESS","ATTACH_WITNESS"),Object(b.a)(s,"UN_ATTACH_WITNESS","UN_ATTACH_WITNESS"),Object(b.a)(s,"REQUEST_EDFS","REQUEST_EDFS"),Object(b.a)(s,"RECEIVE_EDFS","RECEIVE_EDFS"),Object(b.a)(s,"RECEIVE_EDFS_FAILURE","RECEIVE_EDFS_FAILURE"),Object(b.a)(s,"CLEAR_EDF_INFO","CLEAR_EDF_INFO"),Object(b.a)(s,"CREATE_EDF","CREATE_EDF"),Object(b.a)(s,"UPDATE_EDF","UPDATE_EDF"),Object(b.a)(s,"REQUEST_EDF_ITEMS","REQUEST_EDF_ITEMS"),Object(b.a)(s,"RECEIVE_EDF_ITEMS","RECEIVE_EDF_ITEMS"),Object(b.a)(s,"RECEIVE_EDF_ITEMS_FAILURE","RECEIVE_EDF_ITEMS_FAILURE"),Object(b.a)(s,"UPDATE_ITEM","UPDATE_ITEM"),Object(b.a)(s,"CREATE_ITEM","CREATE_ITEM"),Object(b.a)(s,"REQUEST_EDF_MANIFESTATIONS","REQUEST_EDF_MANIFESTATIONS"),Object(b.a)(s,"RECEIVE_EDF_MANIFESTATIONS","RECEIVE_EDF_MANIFESTATIONS"),Object(b.a)(s,"RECEIVE_EDFS_MANIFESTATIONS_FAILURE","RECEIVE_EDFS_MANIFESTATIONS_FAILURE"),Object(b.a)(s,"CLEAR_ASSIGNED_EDF_MANIFESTATIONS","CLEAR_ASSIGNED_EDF_MANIFESTATIONS"),Object(b.a)(s,"REQUEST_MANIFEST","REQUEST_MANIFEST"),Object(b.a)(s,"RECEIVE_MANIFEST","RECEIVE_MANIFEST"),Object(b.a)(s,"RECEIVE_MANIFEST_FAILURE","RECEIVE_MANIFEST_FAILURE"),Object(b.a)(s,"CHANGE_FOCUSED_ITEM","CHANGE_FOCUSED_ITEM"),Object(b.a)(s,"ASSOCIATE_SURFACE","ASSOCIATE_SURFACE"),Object(b.a)(s,"SELECT_CANVAS","SELECT_CANVAS"),s),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.ASSIGN_EDF:return{id:t.id,title:t.title,description:t.description,items:t.items};case C.UPDATE_EDF:return{id:t.id,title:t.title,description:t.description};case C.CLEAR_EDF_INFO:return{};default:return e}},A=n(55),_=n(19),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.REQUEST_EDFS:return e;case C.RECEIVE_EDFS:return t.edfList.map(function(e){return{id:e.expressionShortId.value,title:e.expressionTitle.value,authorId:e.authorShortId.value,description:"scta description",status:"SCTA"}});case C.REQUEST_EDF_ITEMS:return e;case C.RECEIVE_EDF_ITEMS:var n=t.edfItems.map(function(e){return{id:e.itemShortId.value,title:e.itemTitle.value,questionTitle:e.questionTitle?e.questionTitle.value:""}});return e.map(function(e){return e.id===t.expressionShortId?Object(_.a)({},e,{items:n}):e});case C.UPDATE_ITEM:var i=e.slice();return i.find(function(e){return e.id===t.edfId}).items.find(function(e){return e.id===t.id}).proposedChange={title:t.title,questionTitle:t.questionTitle},Object(A.a)(i);case C.CREATE_ITEM:var s=e.slice(),r=s.find(function(e){return e.id===t.edfId}),o={id:t.id,proposedChange:{title:t.title,questionTitle:t.questionTitle}};return r.items.push(o),Object(A.a)(s);case C.REQUEST_EDF_MANIFESTATIONS:return e;case C.RECEIVE_EDF_MANIFESTATIONS:var a=t.edfManifestations.map(function(e){return{id:e.witnessShortId.value,title:"title",description:"description"}});return e.map(function(e){return e.id===t.expressionShortId?Object(_.a)({},e,{manifestations:a}):e});case C.CREATE_EDF:var c=e.slice();return c.push({id:t.id,title:t.title,authorTitle:"authorTitle",description:t.description,items:[],manifestations:[],status:"provisional"}),c;case C.UPDATE_EDF:return e.map(function(e){return e.id===t.id?"provisional"===e.status?Object(_.a)({},e,{title:t.title,description:t.description}):Object(_.a)({},e,{proposedChange:{title:t.title,description:t.description}}):e});case C.ASSOCIATE_SURFACE:var d=e.slice(),u=d.find(function(e){return e.id===t.edfId}).items.find(function(e){return e.id==t.itemId});return u.surfaces?u.surfaces.push({surfaceId:t.surfaceId,itemId:t.itemId,witnessId:t.witnessId}):(u.surfaces=[],u.surfaces.push({surfaceId:t.surfaceId,itemId:t.itemId,witnessId:t.witnessId})),Object(A.a)(d);case C.RECEIVE_EDFS_FAILURE:default:return e}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.REQUEST_PERSONS:return e;case C.RECEIVE_PERSONS:return t.personsList.map(function(e){return{id:e.personShortId.value,title:e.personTitle.value,description:"scta description",status:"SCTA"}});case C.RECEIVE_PERSONS_FAILURE:case C.CREATE_PERSON:var n=e.slice();return n.push({id:t.id,title:t.title,description:t.description,status:"provisional"}),n;case C.UPDATE_PERSON:return e.map(function(e){return e.id===t.id?"provisional"===e.status?Object(_.a)({},e,{title:t.title,description:t.description}):Object(_.a)({},e,{proposedChange:{title:t.title,description:t.description}}):e});default:return e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.ASSIGN_PERSON:return{id:t.id,title:t.title,description:t.description};case C.UPDATE_PERSON:return Object(_.a)({},e,{title:t.title,description:t.description});case C.CLEAR_PERSON_INFO:return{};default:return e}};function R(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.ATTACH_WITNESS:var n=e.slice();if(!n.find(function(e){return e.id===t.id}))return n.push(t.info),n;case C.UN_ATTACH_WITNESS:return e.filter(function(e){return e.id!==t.id});case C.CLEAR_ASSIGNED_EDF_MANIFESTATIONS:return[];case C.UPDATE_WITNESS:return e.map(function(e){return e.id===t.id?{id:e.id,title:t.title,description:t.description}:e});default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.REQUEST_WITNESSES:return e;case C.RECEIVE_WITNESSES2:return t.witnessesList;case C.RECEIVE_WITNESSES:return t.witnessesList.map(function(e){var t=e.witness.value.split("/resource/");return{id:t[t.length-1],title:e.witnessTitle.value,description:"scta description",manifest:e.manifest.value,status:"SCTA"}});case C.RECEIVE_WITNESSES_FAILURE:case C.CREATE_WITNESS:var n=e.slice();return n.push(Object(_.a)({},t.info,{status:"provisional"})),n;case C.UPDATE_WITNESS:return e.map(function(e){return e.id===t.id?{id:e.id,title:e.title,description:e.description,status:e.status,proposedChange:{title:t.title,description:t.description}}:e});default:return e}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.CHANGE_DATA_CREATION_VIEW:return Object.assign({},e,{dataCreationView:t.dataCreationView});case C.CHANGE_FOCUSED_WITNESS:return Object.assign({},e,{focusedWitness:t.id});case C.CHANGE_FOCUSED_ITEM:return Object(_.a)({},e,{focusedItem:t.id});case C.SELECT_CANVAS:return Object(_.a)({},e,{canvasid:t.canvasid});default:return e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.REQUEST_MANIFEST:return e;case C.RECEIVE_MANIFEST:return Object(_.a)({},e,Object(b.a)({},t.manifestid,t.manifestdata));case C.RECEIVE_MANIFEST_FAILURE:default:return e}},P=Object(T.combineReducers)({edfInfo:g,edfListInfo:j,personsInfo:w,personInfo:N,witnessInfo:F,witnessesInfo:y,view:D,manifests:M}),W=n(36),L=n.n(W);function U(){return{type:C.REQUEST_PERSONS}}function k(e){return{type:C.RECEIVE_PERSONS,personsList:e}}function x(e){return{type:C.RECEIVE_PERSONS_FAILURE,error:e}}function V(){var e=["SELECT DISTINCT ?person ?personTitle ?personShortId ","WHERE { ","?person a <http://scta.info/resource/person> .","?person <http://scta.info/property/shortId> ?personShortId .","?person <http://purl.org/dc/elements/1.1/title> ?personTitle .","}","ORDER BY ?personTitle"].join("");return function(t){t(U()),L.a.get("https://sparql.scta.info/ds/query",{params:{query:e,output:"json"}}).then(function(e){t(k(e.data.results.bindings))}).catch(function(e){return t(x(e))})}}function q(){return{type:C.REQUEST_WITNESSES}}function H(e){return{type:C.RECEIVE_WITNESSES,witnessesList:e}}function G(e){return{type:C.RECEIVE_WITNESSES_FAILURE,error:e}}function Q(){var e=["SELECT DISTINCT ?witness ?witnessTitle ?witnessShortId ?manifest ","WHERE { ","?witness a <http://scta.info/resource/codex> .","?witness <http://purl.org/dc/elements/1.1/title> ?witnessTitle .","?witness <http://scta.info/property/hasCanonicalCodexItem> ?item .","?item <http://scta.info/property/hasOfficialManifest> ?manifest .","}","ORDER BY ?witnessTitle"].join("");return function(t){t(q()),L.a.get("https://sparql.scta.info/ds/query",{params:{query:e,output:"json"}}).then(function(e){t(H(e.data.results.bindings))}).catch(function(e){return t(G(e))})}}function B(){return{type:C.REQUEST_MANIFEST}}function J(e,t){return{type:C.RECEIVE_MANIFEST,manifestid:e,manifestdata:t}}function Y(e){return{type:C.RECEIVE_MANIFEST_FAILURE,error:e}}function z(e){return function(t){t(B()),L.a.get(e).then(function(n){t(J(e,n.data))}).catch(function(e){return t(Y(e))})}}function K(){return{type:C.REQUEST_EDFS}}function X(e){return{type:C.RECEIVE_EDFS,edfList:e}}function Z(e){return{type:C.RECEIVE_EDFS_FAILURE,error:e}}function $(){var e=["SELECT DISTINCT ?expression ?expressionTitle ?authorTitle ?expressionShortId ?authorShortId ","WHERE { ","?expression a <http://scta.info/resource/expression> .","?expression <http://scta.info/property/level> '1' .","BIND(STRAFTER(STR(?expression), '/resource/') AS ?expressionShortId) .","?expression <http://www.loc.gov/loc.terms/relators/AUT> ?author .","?author <http://purl.org/dc/elements/1.1/title> ?authorTitle .","?author <http://scta.info/property/shortId> ?authorShortId .","?expression <http://purl.org/dc/elements/1.1/title> ?expressionTitle .","}","ORDER BY ?expressionTitle"].join(" ");return function(t){t(K()),L.a.get("https://sparql.scta.info/ds/query",{params:{query:e,output:"json"}}).then(function(e){t(X(e.data.results.bindings))}).catch(function(e){return t(Z(e))})}}function ee(e){return{type:C.REQUEST_EDF_ITEMS}}function te(e,t){return{type:C.RECEIVE_EDF_ITEMS,expressionShortId:e,edfItems:t}}function ne(e,t){return{type:C.RECEIVE_EDFS_ITEMS_FAILURE,expressionShortId:e,error:t}}function ie(e){var t=["SELECT DISTINCT ?item ?itemTitle ?questionTitle ?itemShortId ","WHERE { ","<http://scta.info/resource/"+e+"> a <http://scta.info/resource/expression> .","?item <http://scta.info/property/isPartOfTopLevelExpression> <http://scta.info/resource/"+e+"> .","?item <http://scta.info/property/structureType> <http://scta.info/resource/structureItem> .","?item <http://purl.org/dc/elements/1.1/title> ?itemTitle .","?item <http://scta.info/property/shortId> ?itemShortId .","OPTIONAL","{","?item <http://scta.info/property/questionTitle> ?questionTitle .","}","?item <http://scta.info/property/totalOrderNumber> ?order .","}","ORDER BY ?order"].join("");return function(n){n(ee()),L.a.get("https://sparql.scta.info/ds/query",{params:{query:t,output:"json"}}).then(function(t){n(te(e,t.data.results.bindings))}).catch(function(t){return n(ne(e,t))})}}function se(e){return{type:C.REQUEST_EDF_MANIFESTATIONS}}function re(e,t){return{type:C.RECEIVE_EDF_MANIFESTATIONS,expressionShortId:e,edfManifestations:t}}function oe(e,t){return{type:C.RECEIVE_EDFS_MANIFESTATIONS_FAILURE,expressionShortId:e,error:t}}function ae(e){var t=["SELECT DISTINCT ?manifestationShortId ?witnessShortId ","WHERE { ","<http://scta.info/resource/"+e+"> <http://scta.info/property/hasManifestation> ?manifestation .","?manifestation <http://scta.info/property/shortId> ?manifestationShortId .","?manifestation <http://scta.info/property/hasSlug> ?witnessShortId .","}"].join("");return function(n){n(se()),L.a.get("https://sparql.scta.info/ds/query",{params:{query:t,output:"json"}}).then(function(t){n(re(e,t.data.results.bindings)),t.data.results.bindings.forEach(function(e){n(pe({id:e.witnessShortId.value,title:"title",description:"description"}))})}).catch(function(t){return n(oe(e,t))})}}function ce(e){return function(t){e.manifestations.forEach(function(e){t(pe({id:e.id,title:"title",description:"description"}))})}}function de(e){return{type:C.CLEAR_ASSIGNED_EDF_MANIFESTATIONS,edfId:e}}function ue(e){return e||(e="edfCreation"),{type:C.CHANGE_DATA_CREATION_VIEW,dataCreationView:e}}function fe(e){var t="cod-"+R().toLowerCase();return e.id=t,function(t){t(le(e)),t(pe(e))}}function le(e){return{type:C.CREATE_WITNESS,info:e}}function pe(e){return{type:C.ATTACH_WITNESS,info:e}}function Ee(e){return{type:C.UN_ATTACH_WITNESS,id:e}}function he(e,t,n){return{type:C.UPDATE_WITNESS,title:t,description:n,id:e}}function Ie(e){return{type:C.CHANGE_FOCUSED_WITNESS,id:e}}function me(e){var t=R().toLowerCase();return e.id=t,function(t){t(Se(e)),t(ve(e))}}function ve(e){return{type:C.ASSIGN_EDF,id:e.id,title:e.title,authorTitle:e.authorTitle,description:e.description}}function Se(e){return{type:C.CREATE_EDF,id:e.id,title:e.title,authorTitle:e.authorTitle,description:e.description}}function Te(e){return{type:C.UPDATE_EDF,id:e.id,title:e.title,authorTitle:e.authorTitle,description:e.description}}function Oe(e){return{type:C.CLEAR_EDF_INFO}}function be(e){var t="per-"+R();return e.id=t.toLowerCase,function(t){t(ge(e)),t(Ce(e))}}function Ce(e){return{type:C.ASSIGN_PERSON,id:e.id,title:e.title,description:e.description}}function ge(e){return{type:C.CREATE_PERSON,id:e.id,title:e.title,description:e.description}}function Ae(e){return{type:C.UPDATE_PERSON,id:e.id,title:e.title,description:e.description}}function _e(){return{type:C.CLEAR_PERSON_INFO}}function je(e){return Object(_.a)({type:C.UPDATE_ITEM},e)}function we(e,t){var n=e+"-"+R().toLowerCase();return Object(_.a)({type:C.CREATE_ITEM,edfId:e,id:n},t)}function Ne(e){return{type:C.CHANGE_FOCUSED_ITEM,id:e}}function Re(e,t,n,i){return{type:C.ASSOCIATE_SURFACE,surfaceId:e,witnessId:t,itemId:n,edfId:i}}function Fe(e){return{type:C.SELECT_CANVAS,canvasid:e}}var ye=Object(S.createLogger)();var De=function(){try{var e=JSON.parse(localStorage.getItem("data-creation-state"));return e||void 0}catch(t){return}}(),Me=Object(T.createStore)(P,De,Object(O.composeWithDevTools)(Object(T.applyMiddleware)(v.a,ye))),Pe=i;var We=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleDownloadOnclick=n.handleDownloadOnclick.bind(Object(h.a)(Object(h.a)(n))),n.handleDownloadCdfs=n.handleDownloadCdfs.bind(Object(h.a)(Object(h.a)(n))),n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleDownloadOnclick",value:function(){var e=function(e){var t=e.witnessInfo.map(function(t){var n="",i=e.witnessesInfo.find(function(e){return e.id===t.id});if(i)n=i.proposedChange?i.proposedChange.title:i.title,i.proposedChange?i.proposedChange.description:i.description;else{var s=e.edfListInfo.find(function(t){return t.id===e.edfInfo.id}).manifestations.find(function(e){return e.id===t.id});n=s.proposedChange?s.proposedChange.title:s.title,s.proposedChange?s.proposedChange.description:s.description}return c=['     <witness id="'+t.id+'">',"       <slug>"+t.id+"</slug>","       <title>"+n.replace("&","&amp;")+"</title>","       <initial>"+t.id+"</initial>","     </witness>"].join("\n")}),n=e.edfListInfo.find(function(t){return t.id===e.edfInfo.id}),i=[];n.items&&(i=n.items.map(function(e){var t=[];if(e.surfaces){var n=e.surfaces.map(function(e){return e.witnessId});t=Object(A.a)(new Set(n)).map(function(t){var n=e.surfaces.map(function(e){if(e.witnessId===t)return"           <folio>"+e.surfaceId+"</folio>"});return n=n.filter(function(e){return void 0!=e}),['         <witness ref="#'+t+'">',n.join("\n"),"         </witness>"].join("\n")})}var i=e.proposedChange?e.proposedChange.title:e.title,s=e.proposedChange?e.proposedChange.questionTitle:e.questionTitle;return c=['     <item id="'+e.id+'">','       <fileName filestem="'+e.id+'"/>',"       <title>"+i+"</title>","       <questionTitle>"+s+"</questionTitle>","       <hasWitnesses>",t.join("\n"),"       </hasWitnesses>","     </item>"].join("\n")}));var s=e.personsInfo.find(function(t){return t.id===e.personInfo.id}),r=s.proposedChange?s.proposedChange.title:s.title,o=(s.proposedChange?s.proposedChange.description:s.description,e.edfListInfo.find(function(t){return t.id===e.edfInfo.id})),a=o.proposedChange?o.proposedChange.title:o.title,c=(o.proposedChange?o.proposedChange.description:o.description,['<?xml version="1.0" encoding="UTF-8"?>','<?xml-model href="https://raw.githubusercontent.com/scta/edf-schema/master/src/projectfile.rng" type="application/xml" schematypens="http://relaxng.org/ns/structure/1.0"?>',"<listofFileNames>","  <header>","    <authorName>"+r+"</authorName>","    <commentaryName>"+a.replace("&","&amp")+"</commentaryName>","    <commentaryid>"+e.edfInfo.id+"</commentaryid>","    <commentaryslug>"+e.edfInfo.id+"</commentaryslug>","    <alias>"+a.replace(/\s+/g," ")+"</alias>","    <authorUri>http://scta.info/resource/"+e.personInfo.id+"</authorUri>","    <parentWorkGroup>http://scta.info/resource/uncategorized</parentWorkGroup>","    <questionListSource/>","    <questionListOriginalEditor/>","    <questionListEncoder/>",'    <gitRepoBase type="toplevel">https://github.com/scta-texts/</gitRepoBase>',"    <hasWitnesses>",t.join("\n"),"    </hasWitnesses>","  </header>",'  <div id="body">',"    <head>"+a.replace("&","&amp")+"</head>",i.join("\n"),"  </div>","</listofFileNames>"].join("\n"));return c}(this.props);m()(e,this.props.edfInfo.id+".xml"),window.location.href="data:application/xml;charset=utf-8,"+encodeURI(e)}},{key:"handleDownloadCdfs",value:function(){this.props.witnessesInfo.forEach(function(e){if(e.proposedChange||"provisional"===e.status){var t=function(e){var t=e.proposedChange?e.proposedChange.title:e.title,n=e.proposedChange?e.proposedChange.description:e.description,i=e.proposedChange?e.proposedChange.manifest:e.manifest;return['<?xml version="1.0" encoding="UTF-8"?>',"<codex>","  <head>","    <type>manuscript</type>",'    <shortid alias="alias">'+e.id+"</shortid>","    <title>"+t+"</title>","    <initial>P</initial>","    <description>"+n+"</description>","    <hasItems>","      <item>","        <canonical>true</canonical>","        <shortid>"+e.id+"cod-dfjq1w/item1</shortid>","        <holdingInstitution>holding institution id goes here</holdingInstitution>","        <libraryRecord>library catalogue url goes here</libraryRecord>","        <canvasBase></canvasBase>","        <manifestOfficial>"+i+"</manifestOfficial>","      </item>","    </hasItems>","  </head>","  <surfaces> </surfaces>","</codex>"].join("\n")}(e);m()(t,e.id+".xml"),window.location.href="data:application/xml;charset=utf-8,"+encodeURI(t)}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"navbar"},o.a.createElement("a",{onClick:this.handleDownloadOnclick},"Export Edf v. 0.0.0")," |",o.a.createElement("a",{onClick:this.handleDownloadCdfs},"Export Cdf(s) v. 0.0.0"))}}]),t}(r.Component),Le=Object(d.b)(function(e){return{edfInfo:e.edfInfo,edfListInfo:e.edfListInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo}},function(e){return{changeDataCreationView:function(t){return e(Pe.changeDataCreationView(t))}}})(We),Ue=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handlePersonSelect=n.handlePersonSelect.bind(Object(h.a)(Object(h.a)(n))),n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handlePersonSelect",value:function(){this.props.assignPerson({id:this.props.id,title:this.props.title,description:"description"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("p",{className:this.props.status,onClick:this.handlePersonSelect,ref:"item",value:this.props.id,title:this.props.title,key:this.props.id},this.props.title),function(t){if(t.proposedChange)return o.a.createElement("div",{className:"provisional"},"Proposed Change:",o.a.createElement("p",null,"title ",e.props.proposedChange.title),o.a.createElement("p",null,"description ",e.props.proposedChange.description," "))}(this.props))}}]),t}(r.Component),ke=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,view:e.view}},function(e){return{assignPerson:function(t){return e(Pe.assignPerson(t))}}})(Ue),xe=n(84),Ve=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleOnChangeSearchText=n.handleOnChangeSearchText.bind(Object(h.a)(Object(h.a)(n))),n.state={searchText:""},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleOnChangeSearchText",value:function(e){e.preventDefault();var t=e.target.value;this.setState(function(){return{searchText:t}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"personsList"},o.a.createElement(xe.a,{disabled:!1,large:!1,leftIcon:"filter",onChange:this.handleOnChangeSearchText,placeholder:"Filter People ...",small:!0}),(e=this.props,t=this.state.searchText,e.personsInfo.map(function(e){if(!t||e.title.includes(t))return o.a.createElement(ke,{key:e.id,id:e.id,title:e.title,status:e.status,proposedChange:e.proposedChange})})));var e,t}}]),t}(r.Component),qe=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,view:e.view}},function(e){return{updatePerson:function(t,n){return e(Pe.updatePerson(t,n))}}})(Ve),He=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleWitnessSelect=n.handleWitnessSelect.bind(Object(h.a)(Object(h.a)(n))),n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleWitnessSelect",value:function(){this.props.attachWitness({id:this.props.witness.id,title:this.props.witness.title,description:this.props.witness.description})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("p",{className:this.props.witnessStatus,onClick:this.handleWitnessSelect,ref:"item",value:this.props.witness.id,name:this.props.witness.title,key:this.props.witness.id},this.props.witness.title),function(){if(e.props.witness.proposedChange)return o.a.createElement("div",{className:"provisional"},"Proposed Change:",o.a.createElement("p",null,"title ",e.props.witness.proposedChange.title),o.a.createElement("p",null,"description ",e.props.witness.proposedChange.description," "))}())}}]),t}(r.Component),Ge=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo,view:e.view,manifest:e.manifest}},function(e){return{attachWitness:function(t){return e(Pe.attachWitness(t))},fetchManifest:function(t){return e(Pe.fetchManifest(t))}}})(He),Qe=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleOnChangeSearchText=n.handleOnChangeSearchText.bind(Object(h.a)(Object(h.a)(n))),n.state={searchText:""},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleOnChangeSearchText",value:function(e){e.preventDefault();var t=e.target.value;this.setState(function(){return{searchText:t}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"witnessesList"},o.a.createElement(xe.a,{disabled:!1,large:!1,leftIcon:"filter",onChange:this.handleOnChangeSearchText,placeholder:"Filter Witnesses ...",small:!0}),(e=this.props,t=this.state.searchText,e.witnessesInfo.map(function(e){if(!t||e.title.includes(t))return o.a.createElement(Ge,{key:e.id,witness:e})})));var e,t}}]),t}(r.Component),Be=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessesInfo:e.witnessesInfo,witnessInfo:e.witnessInfo,view:e.view}},function(e){return{}})(Qe),Je=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleEdfSelect=n.handleEdfSelect.bind(Object(h.a)(Object(h.a)(n))),n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleEdfSelect",value:function(e){var t=this;e.preventDefault();var n={id:this.props.edfId,title:this.props.edfTitle,description:"description"};if(this.props.assignEdf(n),this.props.items||this.props.fetchEdfItems(this.props.edfId),this.props.clearAssignedEdfManifestations(this.props.edfId),this.props.manifestations){var i=this.props.edfList.find(function(e){return e.id===t.props.edfId});this.props.assignManifestations(i)}else this.props.fetchEdfManifestations(this.props.edfId);this.props.assignPerson({id:this.props.authorId,title:"title",description:"description"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("p",{className:this.props.edfStatus,onClick:this.handleEdfSelect,ref:"item",value:this.props.edfId,name:this.props.edfTitle,key:this.props.edfId},this.props.authorTitle+" \u2013 "+this.props.edfTitle),function(t){if(t.proposedChange)return o.a.createElement("div",{className:"provisional"},"Proposed Change:",o.a.createElement("p",null,"title ",e.props.proposedChange.title),o.a.createElement("p",null,"description ",e.props.proposedChange.description," "))}(this.props))}}]),t}(r.Component),Ye=Object(d.b)(function(e){return{witnessesInfo:e.witnessesInfo}},function(e){return{assignEdf:function(t){return e(Pe.assignEdf(t))},fetchEdfItems:function(t){return e(Pe.fetchEdfItems(t))},fetchEdfManifestations:function(t){return e(Pe.fetchEdfManifestations(t))},clearAssignedEdfManifestations:function(t){return e(Pe.clearAssignedEdfManifestations(t))},assignManifestations:function(t){return e(Pe.assignManifestations(t))},assignPerson:function(t){return e(Pe.assignPerson(t))}}})(Je),ze=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleOnChangeSearchText=n.handleOnChangeSearchText.bind(Object(h.a)(Object(h.a)(n))),n.state={searchText:""},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleOnChangeSearchText",value:function(e){e.preventDefault();var t=e.target.value;this.setState(function(){return{searchText:t}})}},{key:"render",value:function(){return o.a.createElement("div",{className:"edfsList"},o.a.createElement(xe.a,{disabled:!1,large:!1,leftIcon:"filter",onChange:this.handleOnChangeSearchText,placeholder:"Filter Text ...",small:!0}),(e=this.props,t=this.state.searchText,e.edfListInfo.map(function(n){var i=e.personsInfo.find(function(e){return e.id===n.authorId}),s=i?i.title:"";if(!t||n.title.toLowerCase().includes(t.toLowerCase())||s.toLowerCase().includes(t.toLowerCase()))return o.a.createElement(Ye,{key:n.id,authorTitle:s,authorId:n.authorId,edfId:n.id,edfTitle:n.title,edfStatus:n.status,proposedChange:n.proposedChange,items:n.items})})));var e,t}}]),t}(r.Component),Ke=Object(d.b)(function(e){return{edfInfo:e.edfInfo,edfListInfo:e.edfListInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,view:e.view}},function(e){return{updatePerson:function(t,n){return e(Pe.updatePerson(t,n))}}})(ze),Xe=n(30),Ze=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleToggleEdit=n.handleToggleEdit.bind(Object(h.a)(Object(h.a)(n))),n.handleRemoveWitness=n.handleRemoveWitness.bind(Object(h.a)(Object(h.a)(n))),n.handleFocusWitness=n.handleFocusWitness.bind(Object(h.a)(Object(h.a)(n))),n.state={editMode:!1},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleToggleEdit",value:function(e){e.preventDefault();var t=this.refs.title.textContent,n=this.refs.description.textContent;this.state.editMode&&this.props.updateWitness(this.props.id,t,n),this.setState(function(e){return{editMode:!e.editMode}})}},{key:"handleRemoveWitness",value:function(e){e.preventDefault(),this.props.unAttachWitness(this.props.id),this.props.id===this.props.view.focusedWitness&&this.props.changeFocusedWitness("")}},{key:"handleFocusWitness",value:function(e){var t=this;e.preventDefault(),this.props.changeFocusedWitness(this.props.id);var n=this.props.witnessesInfo.find(function(e){return e.id===t.props.id});if(n){var i=n.manifest;this.props.fetchManifest(i)}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",{ref:"id"},this.props.id),o.a.createElement("p",{contentEditable:this.state.editMode,ref:"title"},this.props.title),o.a.createElement("p",{contentEditable:this.state.editMode,ref:"description"},"Description: ",this.props.description),o.a.createElement("p",{contentEditable:this.state.editMode,ref:"manifest"},"Manifest: ",this.props.manifest),o.a.createElement(Xe.b,{onClick:this.handleToggleEdit,active:this.state.editMode},"Toggle Edit"),o.a.createElement(Xe.b,{onClick:this.handleRemoveWitness},"Remove"),o.a.createElement(Xe.b,{onClick:this.handleFocusWitness},"Focus"))}}]),t}(r.Component),$e=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo,view:e.view}},function(e){return{changeFocusedWitness:function(t){return e(Pe.changeFocusedWitness(t))},updateWitness:function(t,n,i){return e(Pe.updateWitness(t,n,i))},unAttachWitness:function(t){return e(Pe.unAttachWitness(t))},fetchManifest:function(t){return e(Pe.fetchManifest(t))}}})(Ze),et=n(132),tt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleAddNewWitness=n.handleAddNewWitness.bind(Object(h.a)(Object(h.a)(n))),n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleAddNewWitness",value:function(e){e.preventDefault();var t=this.refs.form.title.value,n=this.refs.form.description.value,i=this.refs.form.manifest.value;this.props.createAndAttachWitness({title:t,description:n,manifest:i}),this.refs.form.title.value="",this.refs.form.description.value="",this.refs.form.manifest.value=""}},{key:"render",value:function(){return o.a.createElement("div",{className:"data-creation-form"},o.a.createElement("h3",null,"Assign New Witness"),o.a.createElement("form",{onSubmit:this.handleAddNewWitness,ref:"form"},o.a.createElement(et.a,{label:"Title",labelFor:"title"},o.a.createElement(xe.a,{id:"title",placeholder:"title"})),o.a.createElement(et.a,{label:"Description",labelFor:"description"},o.a.createElement(xe.a,{id:"description",placeholder:"description"})),o.a.createElement(et.a,{label:"Manifest",labelFor:"manifest"},o.a.createElement(xe.a,{id:"manifest",placeholder:"manifest"})),o.a.createElement(Xe.b,{type:"submit"},"Submit")))}}]),t}(r.Component),nt=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo,view:e.view}},function(e){return{createAndAttachWitness:function(t){return e(Pe.createAndAttachWitness(t))}}})(tt),it=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h3",null,"Witness Info"),this.props.witnessInfo.map(function(t){var n=e.props.witnessesInfo.find(function(e){return e.id===t.id});if(n){var i=n.proposedChange?n.proposedChange.manifest:n.manifest,s=n.proposedChange?n.proposedChange.title:n.title,r=n.proposedChange?n.proposedChange.description:n.description;return o.a.createElement($e,{title:s,description:r,id:t.id,key:t.id,manifest:i})}return o.a.createElement($e,{title:t.title,description:t.description,id:t.id,key:t.id,manifest:t.manifest})}),o.a.createElement(nt,null))}}]),t}(r.Component),st=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo,view:e.view}},function(e){return{}})(it),rt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleToggleEdit=n.handleToggleEdit.bind(Object(h.a)(Object(h.a)(n))),n.handleAssignNewPerson=n.handleAssignNewPerson.bind(Object(h.a)(Object(h.a)(n))),n.state={editMode:!1},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleAssignNewPerson",value:function(e){e.preventDefault(),this.props.clearPersonInfo(),this.setState(function(e){return{editMode:!0}})}},{key:"handleToggleEdit",value:function(e){e.preventDefault();var t=this.refs.title.textContent,n=this.refs.description.textContent;this.state.editMode&&(this.props.personInfo.id?this.props.updatePerson({id:this.props.personInfo.id,title:t,description:n}):this.props.createAndAssignPerson({title:t,description:n})),this.setState(function(e){return{editMode:!e.editMode}})}},{key:"render",value:function(){var e=this,t="",n="",i=this.props.personsInfo.find(function(t){return t.id===e.props.personInfo.id});return i&&(t=i.proposedChange?i.proposedChange.title:i.title,n=i.proposedChange?i.proposedChange.description:i.description),o.a.createElement("div",null,o.a.createElement("h3",null,"Person Info"),o.a.createElement("div",null,o.a.createElement("p",null,"Author ID: ",this.props.personInfo.id),o.a.createElement("p",null,"Author"),o.a.createElement("p",{contentEditable:this.state.editMode,ref:"title"},t)),o.a.createElement("div",null,o.a.createElement("p",null,"Description"),o.a.createElement("p",{contentEditable:this.state.editMode,ref:"description"},n)),o.a.createElement(Xe.b,{onClick:this.handleToggleEdit,active:this.state.editMode},"Toggle Edit"),o.a.createElement(Xe.b,{onClick:this.handleAssignNewPerson},"Assign New Person Entry"))}}]),t}(r.Component),ot=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo,view:e.view}},function(e){return{assignPerson:function(t){return e(Pe.assignPerson(t))},clearPersonInfo:function(){return e(Pe.clearPersonInfo())},updatePerson:function(t){return e(Pe.updatePerson(t))},createAndAssignPerson:function(t){return e(Pe.createAndAssignPerson(t))}}})(rt),at=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleToggleEdit=n.handleToggleEdit.bind(Object(h.a)(Object(h.a)(n))),n.handleCreateNewEdf=n.handleCreateNewEdf.bind(Object(h.a)(Object(h.a)(n))),n.state={editMode:!1},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleCreateNewEdf",value:function(e){e.preventDefault(),this.props.clearEdfInfo(),this.setState(function(e){return{editMode:!0}})}},{key:"handleToggleEdit",value:function(e){e.preventDefault();var t=this.refs.title.textContent,n=this.refs.description.textContent;this.state.editMode&&(this.props.edfInfo.id?this.props.updateEdf({id:this.props.edfInfo.id,title:t,description:n}):this.props.createAndAssignEdf({title:t,description:n})),this.setState(function(e){return{editMode:!e.editMode}})}},{key:"render",value:function(){var e=this,t="",n="",i=this.props.edfListInfo.find(function(t){return t.id===e.props.edfInfo.id});return i&&(t=i.proposedChange?i.proposedChange.title:i.title,n=i.proposedChange?i.proposedChange.description:i.description),o.a.createElement("div",null,o.a.createElement("h3",null,"Text Info"),o.a.createElement("div",null,o.a.createElement("p",null,"Id: ",this.props.edfInfo.id),o.a.createElement("p",null,"Title"),o.a.createElement("p",{contentEditable:this.state.editMode,ref:"title"},t)),o.a.createElement("div",null,o.a.createElement("p",null,"Description"),o.a.createElement("p",{contentEditable:this.state.editMode,ref:"description"},n)),o.a.createElement(Xe.b,{onClick:this.handleToggleEdit,active:this.state.editMode},"Toggle Edit"),o.a.createElement(Xe.b,{onClick:this.handleCreateNewEdf},"Start New Edf Entry"))}}]),t}(r.Component),ct=Object(d.b)(function(e){return{edfInfo:e.edfInfo,edfListInfo:e.edfListInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo,view:e.view}},function(e){return{updateEdf:function(t){return e(Pe.updateEdf(t))},clearEdfInfo:function(){return e(Pe.clearEdfInfo())},createAndAssignEdf:function(t){return e(Pe.createAndAssignEdf(t))}}})(at),dt=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleToggleEdit=n.handleToggleEdit.bind(Object(h.a)(Object(h.a)(n))),n.changeFocusedItem=n.changeFocusedItem.bind(Object(h.a)(Object(h.a)(n))),n.state={editMode:!1},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleToggleEdit",value:function(e){e.preventDefault();var t=this.refs.title.textContent,n=this.refs.questionTitle.textContent;this.state.editMode&&(this.props.id?this.props.updateItem({edfId:this.props.edfId,id:this.props.id,title:t,questionTitle:n}):alert("create",t,n)),this.setState(function(e){return{editMode:!e.editMode}})}},{key:"changeFocusedItem",value:function(e){e.preventDefault(),this.props.view.focusedItem===this.props.id?this.props.changeFocusedItem(""):this.props.changeFocusedItem(this.props.id)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:this.props.status},o.a.createElement("p",null,this.props.id),o.a.createElement("p",{contentEditable:this.state.editMode,ref:"title"},this.props.title),o.a.createElement("p",{contentEditable:this.state.editMode,ref:"questionTitle"},this.props.questionTitle),function(){if(e.props.surfaces)return e.props.surfaces.map(function(e){return o.a.createElement("span",{key:e.surfaceId},e.witnessId," : ",e.surfaceId)})}(),o.a.createElement(Xe.b,{onClick:this.handleToggleEdit,active:this.state.editMode},"Toggle Edit"),o.a.createElement(Xe.b,{onClick:this.changeFocusedItem},"Assign Folios"))}}]),t}(r.Component),ut=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo,view:e.view}},function(e){return{updateItem:function(t){return e(Pe.updateItem(t))},changeFocusedItem:function(t){return e(Pe.changeFocusedItem(t))}}})(dt),ft=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleAddNewItem=n.handleAddNewItem.bind(Object(h.a)(Object(h.a)(n))),n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleAddNewItem",value:function(e){e.preventDefault();var t=this.refs.form.title.value,n=this.refs.form.questionTitle.value;this.props.edfInfo.id?(this.props.createItem(this.props.edfInfo.id,{title:t,questionTitle:n}),this.refs.form.title.value="",this.refs.form.questionTitle.value=""):alert("focused edf is not set")}},{key:"render",value:function(){return o.a.createElement("div",{className:"data-creation-form"},o.a.createElement("h3",null,"Add New Item"),o.a.createElement("form",{onSubmit:this.handleAddNewItem,ref:"form"},o.a.createElement(et.a,{label:"Title",labelFor:"title"},o.a.createElement(xe.a,{id:"title",placeholder:"title"})),o.a.createElement(et.a,{label:"Question Title",labelFor:"questionTitle"},o.a.createElement(xe.a,{id:"questionTitle",placeholder:"question title"})),o.a.createElement(Xe.b,{type:"submit"},"Submit")))}}]),t}(r.Component),lt=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo,view:e.view}},function(e){return{createItem:function(t,n){return e(Pe.createItem(t,n))}}})(ft),pt=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"Items"),function(e,t){var n=t.find(function(t){return t.id===e.id}),i=[];return n&&n.items&&(i=n.items.map(function(t){var n=t.surfaces?t.surfaces:void 0;console.log("surfaces from items viewer",n);var i=t.proposedChange?t.proposedChange.title:t.title,s=t.proposedChange?t.proposedChange.questionTitle:t.questionTitle,r=t.proposedChange?"provisional":"SCTA",a=t.id;return o.a.createElement(ut,{title:i,questionTitle:s,edfId:e.id,id:a,key:a,status:r,surfaces:n})})),i}(this.props.edfInfo,this.props.edfListInfo),o.a.createElement(lt,null))}}]),t}(r.Component),Et=Object(d.b)(function(e){return{edfInfo:e.edfInfo,edfListInfo:e.edfListInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,witnessInfo:e.witnessInfo,witnessesInfo:e.witnessesInfo,view:e.view}},function(e){return{}})(pt),ht=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleOnMouseOver=n.handleOnMouseOver.bind(Object(h.a)(Object(h.a)(n))),n.handleOnMouseOut=n.handleOnMouseOut.bind(Object(h.a)(Object(h.a)(n))),n.handleItemAssociation=n.handleItemAssociation.bind(Object(h.a)(Object(h.a)(n))),n.handleNext=n.handleNext.bind(Object(h.a)(Object(h.a)(n))),n.handlePrevoius=n.handlePrevious.bind(Object(h.a)(Object(h.a)(n))),n.state={width:"1000"},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"handleOnMouseOver",value:function(){this.setState(function(){return{width:"1000"}})}},{key:"handleOnMouseOut",value:function(){this.setState(function(){return{width:"1000"}})}},{key:"handleItemAssociation",value:function(){var e=this.props.canvas["@id"],t=this.props.view.focusedWitness,n=this.props.view.focusedItem,i=this.props.edfInfo.id;this.props.associateSurface(e,t,n,i)}},{key:"handleNext",value:function(){this.props.selectCanvas(this.props.canvasNext["@id"])}},{key:"handlePrevious",value:function(){this.props.selectCanvas(this.props.canvasPrevious["@id"])}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{onMouseOver:e.handleOnMouseOver,onMouseOut:e.handleOnMouseOut},o.a.createElement("div",null,o.a.createElement("span",null,e.props.canvas.label),e.props.view.focusedItem&&o.a.createElement(Xe.b,{onClick:e.handleItemAssociation},"Add"),e.props.canvasNext&&o.a.createElement(Xe.b,{onClick:e.handleNext},"Next"),e.props.canvasPrevious&&o.a.createElement(Xe.b,{onClick:e.handlePrevious},"Previous")),o.a.createElement("img",{src:e.props.canvas.images[0].resource.service["@id"]+"/full/"+e.state.width+",/0/default.jpg"}))}}]),t}(r.Component),It=Object(d.b)(function(e){return{edfInfo:e.edfInfo,edfListInfo:e.edfListInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,manifest:e.manifest,view:e.view}},function(e){return{associateSurface:function(t,n,i,s){return e(Pe.associateSurface(t,n,i,s))},selectCanvas:function(t){return e(Pe.selectCanvas(t))}}})(ht),mt=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return function(e,t,n){var i=t[e],s=n.canvasid;if(i){if(s){var r=i.sequences[0].canvases.find(function(e){if(e["@id"]===s)return e}),a=i.sequences[0].canvases.findIndex(function(e,t){if(e["@id"]===s)return t}),c="",d="";return c=a!=i.sequences[0].canvases.length-1?i.sequences[0].canvases[a+1]:void 0,d=0!=a?i.sequences[0].canvases[a-1]:void 0,o.a.createElement(It,{canvas:r,canvasNext:c,canvasPrevious:d})}var u=i.sequences[0].canvases[0],f=i.sequences[0].canvases[1];return o.a.createElement(It,{canvas:u,canvasNext:f,canvasPrevious:void 0})}return null}(function(e,t){if(!t)return null;var n=e.find(function(e){return e.id===t});try{return n.manifest}catch(i){return null}}(this.props.witnessesInfo,this.props.view.focusedWitness),this.props.manifests,this.props.view)}}]),t}(r.Component),vt=Object(d.b)(function(e){return{edfInfo:e.edfInfo,edfListInfo:e.edfListInfo,personsInfo:e.personsInfo,personInfo:e.personInfo,manifests:e.manifests,witnessesInfo:e.witnessesInfo,view:e.view}},function(e){return{}})(mt),St=n(133),Tt=(n(412),n(414),n(416),n(418),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(p.a)(t).call(this,e))).tileRenderer=n.tileRenderer.bind(Object(h.a)(Object(h.a)(n))),n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"tileRenderer",value:function(e,t){var n={a:o.a.createElement(Ke,null),b:o.a.createElement(Be,null),c:o.a.createElement(qe,null),d:o.a.createElement("div",null,o.a.createElement(ct,null),o.a.createElement(ot,null),o.a.createElement(st,null)),g:o.a.createElement(Et,null),h:o.a.createElement(vt,null)},i=St.MosaicWindow.ofType(e);return o.a.createElement(i,{path:t,title:{a:"text list",b:"codex list",c:"person list",d:"focused text",e:"assigned author",f:"assigned witnesses",g:"assigned items",h:"folios"}[e]},n[e])}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("header",{className:"App-header"},o.a.createElement("p",null,"Data Creation App")),o.a.createElement(Le,null),o.a.createElement("div",{id:"app"},o.a.createElement(St.Mosaic,{renderTile:this.tileRenderer,initialValue:{direction:"row",first:{direction:"row",first:"a",second:{direction:"row",first:"b",second:"c"},splitPercentage:33},second:{direction:"row",first:"d",second:{direction:"column",first:"g",second:"h"},splitPercentage:50},splitPercentage:50,currentTheme:"mosaic-blueprint-theme"},zeroStateView:o.a.createElement("div",null)})))}}]),t}(r.Component)),Ot=Object(d.b)(function(e){return{edfInfo:e.edfInfo,personsInfo:e.personsInfo,view:e.view}},function(e){return{fetchPersons:function(){return e(Pe.fetchPersons())}}})(Tt);n(420),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Me.dispatch(Pe.fetchPersons()),Me.dispatch(Pe.fetchEdfList()),Me.dispatch(Pe.fetchWitnesses()),Me.subscribe(function(){localStorage.setItem("data-creation-state",JSON.stringify(Me.getState()))}),c.a.render(o.a.createElement(d.a,{store:Me},o.a.createElement(Ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[197,2,1]]]);
//# sourceMappingURL=main.539039c8.chunk.js.map